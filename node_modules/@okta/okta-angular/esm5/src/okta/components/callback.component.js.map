{"version":3,"file":"callback.component.js","sources":["../../../../src/okta/components/callback.component.ts"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,OAAO,EAAE,SAAS,EAAU,QAAQ,EAAE,QAAQ,EAAE,MAAM,eAAe,CAAC;AACtE,OAAO,EAAE,MAAM,EAAE,MAAM,iBAAiB,CAAC;AACzC,OAAO,EAAE,eAAe,EAAE,MAAM,0BAA0B,CAAC;;;AAI3D;AACE,IAEA,+BAAoB,IAAqB,EAAU,MAAc,EAAsB,QAAmB;AAAI,QAA1F,SAAI,GAAJ,IAAI,CAAiB;AAAC,QAAS,WAAM,GAAN,MAAM,CAAQ;AAAC,QAAqB,aAAQ,GAAR,QAAQ,CAAW;AAAC,IAAE,CAAC;AAChH,IACQ,wCAAQ,GAAd;AAAc;AAEuB;AAAmE;AAEnG;AACkB;AAA4B;AACpB,wBAJ3B,4GAA4G;AAClH,wBAAM,qBAAM,IAAI,CAAC,IAAI,CAAC,mBAAmB,EAAE,EAAA;AAAC;AAEnC,wBAHH,4GAA4G;AAClH,wBAAM,SAAqC,CAAC;AAC5C;AAC+B;AAA4B;AAC9B,wBADvB,gEAAgE;AACtE,wBAAM,IAAI,IAAI,CAAC,IAAI,CAAC,0BAA0B,CAAC,GAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,EAAE;AACpE,4BAAc,KAAmC,IAAI,CAAC,IAAI,CAAC,aAAa,EAAE,EAA1D,YAAY,kBAAA,EAAE,cAAc,oBAAA,CAA+B;AAC3E,4BAAc,UAAU,GAAG,YAAY,IAAI,cAAc,CAAC;AAC1D,4BAAQ,IAAI,UAAU,EAAE;AACxB,gCAAU,UAAU,CAAC,IAAI,CAAC,IAAI,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;AAC/C,gCAAU,sBAAO;AACjB,6BAAS;AACT,yBAAO;AACP,wBAAM,IAAI,CAAC,KAAK,GAAG,GAAC,CAAC,QAAQ,EAAE,CAAC;AAChC;AAGqC;AAAmD;AAAkB;AAAgB;AAAY,KAFnI;AACF,IAtBY,qBAAqB,gCAHjC,SAAS,CAAC,nBAGH,CAG8D,mBAAA,QAAQ,EAAE,CAAA;AAL9E,QAAQ,EAAE,sBAAsB,UACjC,CAAC,3CAIgF,iDAAtD,eAAe,EAAkB,MAAM,EAAiC,QAAQ;AAAG,OAHlG,qBAAqB,CAsBjC;;;;;;;;;;;;;;;;;kCACD;AAAC,IADD,4BAAC;AACA,CADA,AAtBD,IAsBC;AACD,SAvBa,qBAAqB;AAAI","sourcesContent":["/*\n * Copyright (c) 2017-Present, Okta, Inc. and/or its affiliates. All rights reserved.\n * The Okta software accompanied by this notice is provided pursuant to the Apache License, Version 2.0 (the \"License.\")\n *\n * You may obtain a copy of the License at http://www.apache.org/licenses/LICENSE-2.0.\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS, WITHOUT\n * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *\n * See the License for the specific language governing permissions and limitations under the License.\n */\n\nimport { Component, OnInit, Optional, Injector } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { OktaAuthService } from '../services/okta.service';\n@Component({\n  template: `<div>{{error}}</div>`\n})\nexport class OktaCallbackComponent implements OnInit {\n  error: string;\n\n  constructor(private okta: OktaAuthService, private router: Router, @Optional() private injector?: Injector) {}\n\n  async ngOnInit(): Promise<void> {\n    try {\n      // Parse code or tokens from the URL, store tokens in the TokenManager, and redirect back to the originalUri\n      await this.okta.handleLoginRedirect();\n    } catch (e) {\n      // Callback from social IDP. Show custom login page to continue.\n      if (this.okta.isInteractionRequiredError(e) && this.injector) {\n        const { onAuthResume, onAuthRequired } = this.okta.getOktaConfig();\n        const callbackFn = onAuthResume || onAuthRequired;\n        if (callbackFn) {\n          callbackFn(this.okta, this.injector);\n          return;\n        }\n      }\n      this.error = e.toString();\n    }\n  }\n}\n"]}